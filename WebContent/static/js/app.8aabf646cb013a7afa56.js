webpackJsonp([1],{"/+ce":function(e,t){},BmyY:function(e,t){},IKNQ:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=r("VU/8")({name:"App"},a,!1,function(e){r("wYGR")},null,null).exports,n=r("/ocq"),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"header"}},[t("el-row",{attrs:{type:"flex",justify:"space-between"}},[t("el-col",{attrs:{span:10,id:"header-left"}},[t("img",{staticClass:"icon",attrs:{src:r("yWqi")}}),this._v(" "),t("span",{staticClass:"title"},[this._v("新媒体工作室")])]),this._v(" "),t("el-col",{attrs:{span:4,id:"header-center"}},[t("span",{staticClass:"title"},[this._v("信息收集表")])]),this._v(" "),t("el-col",{attrs:{span:10,id:"header-right"}},[t("span",{staticClass:"title"},[this._v("欢迎各位新老工作室的成员！")])])],1)],1)},staticRenderFns:[]};var i=r("VU/8")({name:"Header"},l,!1,function(e){r("IKNQ")},"data-v-3263ab6f",null).exports,c=new(r("TXMN").a),u={name:"FirstRow",data:function(){return{dialogVisible:!1,dialogImageUrl:"",fileName:"",imageUrl:"",uploadSuccess:!1,name:""}},methods:{imgChange:function(e,t){this.fileName=e.name.slice(0,e.name.indexOf(".")),this.imageUrl=e.url,""!==this.name?this.uploadImage():(this.$message({message:"请继续填写姓名以便上传图片！",showClose:!0}),console.log("已有图片等待填姓名。"))},handlePreview:function(e){console.log("图片完全显示！"),this.dialogImageUrl=e.url,this.dialogVisible=!0},beforeRemove:function(e,t){return this.$confirm("确定移除"+e.name+"？","提示")},handleRemove:function(e,t){console.log("图片已删除！"),this.uploadSuccess=!1,this.fileName="",this.imageUrl="",this.name="",this.$emit("removeName",this.name),c.$emit("removeName",this.name)},handleExceed:function(e,t){this.$message({message:"只能选一张！",type:"warning",showClose:!0})},handleSuccess:function(e,t,r){console.log("图片上传成功！",e),this.uploadSuccess=!0},handleError:function(e,t,r){console.log("图片上传失败！",e),this.$message({message:"图片上传失败，请刷新页面重来！",type:"error",showClose:!0})},uploadImage:function(){if(this.uploadSuccess)console.log("您已经上传完图片了，除非您删掉原先图片选择新的图片，否则再改名字是没有用的。");else{if(""===this.imageUrl)return this.$message({message:"您还未上传图片！",type:"error",showClose:!0}),console.log("未上传图片！");if(this.fileName!==this.name)return this.$message({message:"您的图片名看来和你的名字不一样哦，请删掉改好名字再重传！",type:"error",showClose:!0}),console.log("图片命名错误！");this.$refs.upload.submit()}}},mounted:function(){var e=this;c.$on("getName",function(t){e.name=t,""!==e.name?e.uploadImage():(e.$message({message:"您没填名字！",type:"error",showClose:!0}),console.log("您没填名字！"))})}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{id:"firstRow"}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"照片上传"}},[r("el-upload",{ref:"upload",attrs:{action:"UpLoad","list-type":"picture-card","auto-upload":!1,limit:1,"on-change":e.imgChange,"on-preview":e.handlePreview,"before-remove":e.beforeRemove,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"on-error":e.handleError}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("div",{staticStyle:{color:"#F56C6C"}},[e._v("注：请将图片名命名为您的名字再上传！因为当你输入完姓名时这张图片将会自动上传！")]),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)],1)],1)},staticRenderFns:[]};var d={name:"SecondRow",data:function(){return{name:"",number:"",sex:""}},methods:{setName:function(){this.$emit("getName",this.name),c.$emit("getName",this.name)},setNumber:function(){this.$emit("getNumber",this.number)},setSex:function(){this.$emit("getSex",this.sex)}},mounted:function(){var e=this;c.$on("removeName",function(t){e.name=t})}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{id:"secondRow"}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入您的姓名",clearable:""},on:{change:e.setName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"学号",prop:"number"}},[r("el-input",{attrs:{placeholder:"请输入您的学号",clearable:""},on:{change:e.setNumber},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}})],1)],1),e._v(" "),r("el-col",{staticClass:"thirdCol",attrs:{span:8}},[r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-radio-group",{on:{change:e.setSex},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},[r("el-radio",{attrs:{label:"男"}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{id:"thirdRow"}},[r("el-col",{staticClass:"firstCol",attrs:{span:16}},[r("el-form-item",{attrs:{label:"籍贯",prop:"address"}},[r("el-input",{attrs:{placeholder:"请输入具体地址",clearable:""},on:{change:e.setAddress},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},[r("el-select",{attrs:{slot:"prepend",placeholder:"请选择省份，可搜索",filterable:"",clearable:""},on:{change:e.setProvince},slot:"prepend",model:{value:e.province,callback:function(t){e.province=t},expression:"province"}},e._l(e.allProvinces,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),r("el-col",{staticClass:"secondCol",attrs:{span:8}},[r("el-form-item",{attrs:{label:"出生日期",prop:"date"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"请选择出生日期","value-format":"yyyy-MM-dd"},on:{change:e.setBirthday},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)],1)],1)},staticRenderFns:[]};var f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{id:"fourthRow"}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"学院",prop:"academy"}},[r("el-input",{attrs:{placeholder:"请输入学院名",clearable:""},on:{change:e.setAcademy},model:{value:e.academy,callback:function(t){e.academy=t},expression:"academy"}},[r("template",{slot:"append"},[e._v("学院")])],2)],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"专业",prop:"major"}},[r("el-input",{attrs:{placeholder:"请输入专业",clearable:""},on:{change:e.setMajor},model:{value:e.major,callback:function(t){e.major=t},expression:"major"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"班级",prop:"classes"}},[r("el-input",{attrs:{placeholder:"请输入班级",clearable:""},on:{change:e.setClasses},model:{value:e.classes,callback:function(t){e.classes=t},expression:"classes"}},[r("template",{slot:"append"},[e._v("班")])],2)],1)],1)],1)],1)},staticRenderFns:[]};var p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{id:"fifthRow"}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[r("el-input",{attrs:{placeholder:"请输入电话",clearable:""},on:{change:e.setPhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[r("el-input",{attrs:{placeholder:"请输入QQ",clearable:""},on:{change:e.setQQ},model:{value:e.qq,callback:function(t){e.qq=t},expression:"qq"}})],1)],1)],1)],1)},staticRenderFns:[]};var v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{id:"sixthRow"}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"所在部门",prop:"section"}},[r("el-select",{attrs:{placeholder:"请选择所在部门",filterable:"",clearable:""},on:{change:e.setSection},model:{value:e.section,callback:function(t){e.section=t},expression:"section"}},e._l(e.allSections,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"职务",prop:"duty"}},[r("el-select",{attrs:{placeholder:"请选择职务",filterable:"",clearable:""},on:{change:e.setDuty},model:{value:e.duty,callback:function(t){e.duty=t},expression:"duty"}},e._l(e.allDuties,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)],1)},staticRenderFns:[]};var b={name:"SeventhRow",data:function(){return{timeColumn:[{timeSlot:"7:30~9:30",rowNumber:1},{timeSlot:"9:30~12:30",rowNumber:2},{timeSlot:"13:50~15:30",rowNumber:3},{timeSlot:"15:30~18:30",rowNumber:4},{timeSlot:"18:30~21:30",rowNumber:5}],timeTableHeader:[{label:"星期一"},{label:"星期二"},{label:"星期三"},{label:"星期四"},{label:"星期五"},{label:"星期六"},{label:"星期七"}],timeStatus:[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],timeArray:[],timeString:""}},methods:{handleCellClick:function(e,t,r,s){var a=(t.id.slice(18)-1)%8-1;if(a<0)return console.log("此列不能点哦！");var o=e.rowNumber-1,n=String(a+1)+(o+1);if(0===this.timeStatus[a][o])r.style.backgroundColor="#409EFF",this.timeStatus[a][o]=1,this.timeArray.push(n);else{r.style.backgroundColor="white",this.timeStatus[a][o]=0;for(var l=0;l<this.timeArray.length;l++)this.timeArray[l]===n&&this.timeArray.splice(l,1)}this.timeString=this.codeConnect,this.$emit("getTimeString",this.timeString)}},computed:{codeConnect:function(){for(var e="",t=0;t<this.timeArray.length;t++)e+=this.timeArray[t];return e}}},y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-row",{attrs:{id:"seventhRow"}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"空余时间表",prop:"timeString"}},[t("el-table",{staticStyle:{width:"850px"},attrs:{data:this.timeColumn,border:""},on:{"cell-click":this.handleCellClick}},[t("el-table-column",{attrs:{align:"center",label:"时间段",prop:"timeSlot",width:"150"}}),this._v(" "),this._l(this.timeTableHeader,function(e,r){return t("el-table-column",{key:r,attrs:{align:"center",width:"100",label:e.label}})})],2),this._v(" "),t("div",{staticStyle:{color:"#F56C6C"}},[this._v("注：此表是填空闲时间，与课表反着来，不要填成课表了！")])],1)],1)],1)],1)},staticRenderFns:[]};var w={name:"Form",components:{FirstRow:r("VU/8")(u,m,!1,function(e){r("QJ8p")},"data-v-051f1c9c",null).exports,SecondRow:r("VU/8")(d,h,!1,function(e){r("h+6y")},"data-v-8c203618",null).exports,ThirdRow:r("VU/8")({name:"ThirdRow",props:["allProvinces"],data:function(){return{address:"",province:"",date:""}},methods:{setProvince:function(){this.$emit("getProvince",this.province)},setAddress:function(){this.$emit("getAddress",this.address)},setBirthday:function(){this.$emit("getBirthday",this.date)}}},g,!1,function(e){r("BmyY")},"data-v-3b81feed",null).exports,FourthRow:r("VU/8")({name:"FourthRow",data:function(){return{academy:"",major:"",classes:""}},methods:{setAcademy:function(){this.$emit("getAcademy",this.academy)},setMajor:function(){this.$emit("getMajor",this.major)},setClasses:function(){this.$emit("getClasses",this.classes)}}},f,!1,function(e){r("/+ce")},"data-v-9b0e02a0",null).exports,FifthRow:r("VU/8")({name:"FifthRow",data:function(){return{phone:"",qq:""}},methods:{setPhone:function(){this.$emit("getPhone",this.phone)},setQQ:function(){this.$emit("getQQ",this.qq)}}},p,!1,function(e){r("oAuC")},"data-v-4e4e0753",null).exports,SixthRow:r("VU/8")({name:"SixthRow",props:["allSections","allDuties"],data:function(){return{section:"",duty:""}},methods:{setSection:function(){this.$emit("getSection",this.section)},setDuty:function(){this.$emit("getDuty",this.duty)}}},v,!1,function(e){r("sISZ")},"data-v-33246c61",null).exports,SeventhRow:r("VU/8")(b,y,!1,function(e){r("WKNO")},"data-v-2ea6e3c2",null).exports},data:function(){return{ruleForm:{name:"",sex:"",number:"",province:"",address:"",date:"",academy:"",major:"",classes:"",phone:"",qq:"",section:"",duty:"",timeString:""},allProvinces:[],allSections:[],allDuties:[],rules:{name:[{required:!0,message:"请填写名字！",trigger:"blur"}],number:[{required:!0,message:"请填写学号！",trigger:"blur"},{len:10,message:"请填写正确的学号！",trigger:"blur"}],sex:[{required:!0,message:"请选择性别！",trigger:"focus"}],address:[{required:!0,message:"请填写地址！",trigger:"blur"}],date:[{required:!0,message:"请选择出生日期！",trigger:"blur"}],academy:[{required:!0,message:"请填写学院名！",trigger:"blur"}],major:[{required:!0,message:"请填写专业！",trigger:"blur"}],classes:[{required:!0,message:"请填写班级！",trigger:"blur"}],phone:[{required:!0,message:"请填写手机号！",trigger:"blur"},{pattern:/^1[3|4|5|7|8][0-9]{9}$/,message:"请填写正确的格式！",trigger:"blur"}],qq:[{required:!0,message:"请填写QQ号！",trigger:"blur"},{pattern:/^[1-9][0-9]{4,10}$/,message:"请填写正确的格式！",trigger:"blur"}],section:[{required:!0,message:"请选择部门！",trigger:"change"}],duty:[{required:!0,message:"请选择职务！",trigger:"change"}],timeString:[{required:!0,message:"请填写空余时间表！"}]}}},methods:{removeName:function(e){this.ruleForm.name=e},getName:function(e){this.ruleForm.name=e},getNumber:function(e){this.ruleForm.number=e},getSex:function(e){this.ruleForm.sex=e},getProvince:function(e){if(this.ruleForm.province=e,""===this.ruleForm.province)return this.$message({message:"请选择籍贯省份！",type:"error",showClose:!0}),console.log("请选择籍贯省份！")},getAddress:function(e){this.ruleForm.address=e},getBirthday:function(e){this.ruleForm.date=e,console.log("生日",this.ruleForm.date)},getAcademy:function(e){this.ruleForm.academy=e},getMajor:function(e){this.ruleForm.major=e},getClasses:function(e){this.ruleForm.classes=e},getPhone:function(e){this.ruleForm.phone=e},getQQ:function(e){this.ruleForm.qq=e},getSection:function(e){this.ruleForm.section=e},getDuty:function(e){this.ruleForm.duty=e},getTimeString:function(e){this.ruleForm.timeString=e},submitForm:function(e){var t=this;if(""===this.ruleForm.province)return this.$message({message:"您的籍贯省份未选择，无法提交！",type:"error",showClose:!0}),console.log("籍贯省份未选择！");this.$refs[e].validate(function(e){e?(console.log("it can submit"),t.$axios.post("AddStudentMessage",{name:t.ruleForm.name,sex:t.ruleForm.sex,number:t.ruleForm.number,province:t.ruleForm.province,address:t.ruleForm.address,date:t.ruleForm.date,academy:t.ruleForm.academy+"学院",major:t.ruleForm.major,classes:t.ruleForm.classes+"班",phone:t.ruleForm.phone,qq:t.ruleForm.qq,section:t.ruleForm.section,duty:t.ruleForm.duty,timeString:t.ruleForm.timeString}).then(function(e){console.log(e),t.$alert("点击确认刷新页面。","提交成功",{confirmButtonText:"确定",callback:function(e){history.go(0)}})}).catch(function(e){console.log(e),t.$message({message:"提交失败！",type:"error",showClose:!0})})):console.log("it have error.")})},getInfo:function(){var e=this;this.$axios.post("https://easy-mock.com/mock/5bc484581c7b190e5a64ae29/options/staticData").then(function(t){(t=t.data).ret&&t.data&&(e.allProvinces=t.data.allProvinces,e.allSections=t.data.allSections,e.allDuties=t.data.allDuties),console.log("the request success")}).catch(function(t){console.log("the request error"),e.$message({message:"列表数据请求失败，请刷新页面！",type:"error",showClose:!0})})}},mounted:function(){this.getInfo()}},S={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"form"}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("first-row",{on:{removeName:e.removeName}}),e._v(" "),r("second-row",{on:{getName:e.getName,getNumber:e.getNumber,getSex:e.getSex}}),e._v(" "),r("third-row",{attrs:{allProvinces:e.allProvinces},on:{getProvince:e.getProvince,getAddress:e.getAddress,getBirthday:e.getBirthday}}),e._v(" "),r("fourth-row",{on:{getAcademy:e.getAcademy,getMajor:e.getMajor,getClasses:e.getClasses}}),e._v(" "),r("fifth-row",{on:{getPhone:e.getPhone,getQQ:e.getQQ}}),e._v(" "),r("sixth-row",{attrs:{allSections:e.allSections,allDuties:e.allDuties},on:{getSection:e.getSection,getDuty:e.getDuty}}),e._v(" "),r("seventh-row",{on:{getTimeString:e.getTimeString}}),e._v(" "),r("el-row",{attrs:{id:"eighthRow",type:"flex",justify:"center"}},[r("el-col",{attrs:{span:2}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var F={name:"CollectInfo",components:{TheHeader:i,TheForm:r("VU/8")(w,S,!1,function(e){r("TGcB")},"data-v-46eb0956",null).exports}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"collectInfo"}},[t("the-header"),this._v(" "),t("the-form")],1)},staticRenderFns:[]};var x=r("VU/8")(F,_,!1,function(e){r("SPtc")},"data-v-73ee7d81",null).exports;s.default.use(n.a);var $=new n.a({routes:[{path:"/",name:"CollectInfo",component:x}]}),C=r("mtWM"),q=r.n(C),R=r("zL8q"),N=r.n(R);r("tvR6"),r("cjdf"),r("m0iu");s.default.config.productionTip=!1,s.default.prototype.$axios=q.a,s.default.use(N.a),new s.default({el:"#app",router:$,components:{App:o},template:"<App/>"})},QJ8p:function(e,t){},SPtc:function(e,t){},TGcB:function(e,t){},WKNO:function(e,t){},cjdf:function(e,t){},"h+6y":function(e,t){},m0iu:function(e,t){},oAuC:function(e,t){},sISZ:function(e,t){},tvR6:function(e,t){},wYGR:function(e,t){},yWqi:function(e,t,r){e.exports=r.p+"static/img/studio.4da5f2b.jpg"}},["NHnr"]);
//# sourceMappingURL=app.8aabf646cb013a7afa56.js.map